<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PCM é›»å­ç°½ç« å°ˆæ¡ˆç®¡ç†å„€è¡¨æ¿ v4.1 (UIå„ªåŒ–ç‰ˆ)</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
    <style>
        :root {
            --bg-color: #f4f6f9;
            --card-bg: #ffffff;
            --primary: #2c3e50;
            --accent: #3498db;
            --role-pcm: #8e44ad;
            --role-const: #d35400;
            --role-super: #27ae60;
            --text-main: #333;
        }

        body {
            font-family: "Microsoft JhengHei", sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            padding: 20px;
            color: var(--text-main);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            width: 98%;
            max-width: 1600px;
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            min-height: 85vh;
        }

        /* Header */
        .header {
            background: var(--primary);
            color: white;
            padding: 20px;
            text-align: center;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .header h1 { margin: 0; font-size: 1.8rem; }
        .header-info { font-size: 1rem; opacity: 0.9; }

        /* Tabs */
        .tabs {
            display: flex;
            background: #ecf0f1;
            border-bottom: 2px solid #bdc3c7;
            flex-wrap: wrap;
        }
        .tab {
            padding: 15px 20px;
            cursor: pointer;
            font-weight: bold;
            color: #7f8c8d;
            border-right: 1px solid #ddd;
            transition: 0.3s;
        }
        .tab.active {
            background: white;
            color: var(--accent);
            border-top: 4px solid var(--accent);
        }
        .tab:hover:not(.active) { background: #e0e0e0; }

        /* Content Area */
        .content-area {
            flex: 1;
            padding: 20px;
            position: relative;
            background: #fff;
            overflow: auto;
        }

        .hidden { display: none !important; }

        /* --- Gantt Styles --- */
        .gantt-container { width: 100%; overflow-x: auto; border: 1px solid #eee; margin-top: 20px; }
        .gantt-table { width: 100%; border-collapse: collapse; min-width: 1000px; table-layout: fixed; }
        .gantt-header th { background: #f8f9fa; border: 1px solid #ddd; padding: 10px; font-size: 0.9rem; width: 14%; text-align: center; }
        .gantt-header th:first-child { width: 16%; } 
        .gantt-row td { border: 1px solid #eee; padding: 0; height: 40px; position: relative; }
        .task-name { font-weight: bold; padding-left: 10px !important; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .bar-container-cell { width: 84%; position: relative; }
        .bar { height: 24px; border-radius: 4px; position: absolute; top: 8px; color: white; font-size: 0.8rem; display: flex; align-items: center; padding-left: 10px; white-space: nowrap; overflow: hidden; box-shadow: 1px 1px 3px rgba(0,0,0,0.2); transition: width 1s ease-out; width: 0; z-index: 10; }
        .bar-pcm { background: var(--role-pcm); }
        .bar-super { background: var(--role-super); }
        .bar-const { background: var(--role-const); }
        .milestone { background: #e74c3c; width: 20px; height: 20px; transform: rotate(45deg); top: 10px; margin-left: -10px; }
        .grid-line { position: absolute; top: 0; bottom: 0; border-right: 1px dashed #eee; z-index: 0; }

        /* --- Network Styles --- */
        #network-viz { width: 100%; height: 600px; border: 1px solid #ddd; background: #fafafa; }

        /* --- RACI Styles --- */
        .raci-table { width: 100%; border-collapse: collapse; font-size: 1rem; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .raci-table th, .raci-table td { border: 1px solid #ddd; padding: 12px; text-align: center; }
        .raci-table th { background-color: var(--primary); color: white; font-weight: bold; }
        .raci-table tr:nth-child(even) { background-color: #f9f9f9; }
        .col-task { text-align: left !important; font-weight: bold; width: 30%; }
        .symbol-A { color: #c0392b; font-weight: 900; font-size: 1.2rem; }
        .symbol-R { color: #2c3e50; font-weight: 900; font-size: 1.2rem; }
        .symbol-C { color: #2980b9; font-weight: bold; }
        .symbol-I { color: #7f8c8d; }

        /* --- Timeline Styles (Fixed for v4.1) --- */
        .timeline-container { 
            position: relative; 
            margin: 20px 0; 
            /* ä¿®æ­£é‡é»ï¼šå¢åŠ ä¸Šä¸‹ Paddingï¼Œæ’é–‹é«˜åº¦ä»¥å®¹ç´æ¨™ç±¤ */
            padding: 60px 0; 
            overflow-x: auto; 
            /* ä¿®æ­£é‡é»ï¼šéš±è—å‚ç›´æ²è»¸ */
            overflow-y: hidden; 
        }
        .timeline-line { 
            height: 4px; 
            background: #bdc3c7; 
            width: 90%; 
            max-width: 1200px; 
            position: relative; 
            /* ä¿®æ­£é‡é»ï¼šè®“ç·šæ¢åœ¨ Padding å€åŸŸå…§å‚ç›´ç½®ä¸­ */
            top: 0; 
            margin: 0 auto; 
        }
        .timeline-point { 
            position: absolute; 
            top: -8px; 
            width: 20px; 
            height: 20px; 
            border-radius: 50%; 
            background: var(--accent); 
            border: 4px solid white; 
            box-shadow: 0 0 5px rgba(0,0,0,0.3); 
            cursor: pointer; 
            transition: 0.3s; 
        }
        .timeline-point:hover { transform: scale(1.2); background: #e74c3c; }
        .point-label { 
            position: absolute; 
            top: 30px; /* æ¨™ç±¤åœ¨é»ä¸‹æ–¹ */
            left: 50%; 
            transform: translateX(-50%); 
            width: 150px; 
            text-align: center; 
            font-size: 0.9rem; 
            font-weight: bold; 
        }
        .point-date { 
            position: absolute; 
            top: -30px; /* æ—¥æœŸåœ¨é»ä¸Šæ–¹ */
            left: 50%; 
            transform: translateX(-50%); 
            font-size: 0.85rem; 
            color: #7f8c8d; 
            white-space: nowrap; 
        }

        /* --- Specs & Details Styles --- */
        .spec-section { margin-bottom: 30px; border: 1px solid #ddd; border-radius: 8px; padding: 20px; }
        .spec-title { font-size: 1.2rem; font-weight: bold; color: var(--primary); border-bottom: 2px solid var(--accent); padding-bottom: 10px; margin-bottom: 15px; }
        .spec-list { list-style: none; padding: 0; }
        .spec-list li { padding: 8px 0; border-bottom: 1px dashed #eee; display: flex; justify-content: space-between; }
        .spec-key { font-weight: bold; color: #555; }
        .spec-val { color: #333; }
        .code-block { background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 5px; font-family: monospace; overflow-x: auto; font-size: 0.9rem; }

        /* Control Panel */
        .controls { padding: 20px; background: #f1f3f5; display: flex; justify-content: space-between; align-items: center; border-top: 1px solid #ddd; }
        .btn-next { background: var(--accent); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-size: 1rem; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>PCM é›»å­ç°½ç« å°ˆæ¡ˆç®¡ç†å„€è¡¨æ¿ v4.1</h1>
        <div class="header-info">
            å•Ÿå‹•: 2026/01/23 | æ±ºæ¨™: 2026/04/20 | ä¸Šç·š: 2026/05/18
        </div>
    </div>

    <div class="tabs">
        <div class="tab active" onclick="switchTab('dashboard')">ğŸ“Š å°ˆæ¡ˆç¸½è¦½</div>
        <div class="tab" onclick="switchTab('network')">ğŸ•¸ï¸ ç¶²ç‹€åœ–</div>
        <div class="tab" onclick="switchTab('raci')">âš–ï¸ æ¬Šè²¬çŸ©é™£</div>
        <div class="tab" onclick="switchTab('specs')">ğŸ“‚ åŸ·è¡Œç´°ç¯€èˆ‡è¦ç¯„</div>
        <div class="tab" onclick="switchTab('flow')">ğŸ”„ æµç¨‹æ¨¡æ“¬</div>
    </div>

    <div class="content-area" id="content">
        </div>

    <div class="controls hidden" id="flowControls">
        <div id="stepDesc" style="flex:1; font-weight:bold; color:#555;">æº–å‚™å°±ç·’...</div>
        <button class="btn-next" onclick="nextFlowStep()">ä¸‹ä¸€æ­¥ â–¶</button>
    </div>
</div>

<script>
    // --- Data: Schedule ---
    const tasks = [
        { id: 1, name: "å°ˆæ¡ˆå•Ÿå‹•èˆ‡è¦ç¯„åˆ¶å®š (BEP)", start: "2026-01-23", dur: 14, role: "pcm", type: "task" },
        { id: 2, name: "é›»å­ç°½ç« ç´å…¥æ‹›æ¨™æ–‡ä»¶", start: "2026-01-23", dur: 10, role: "pcm", type: "task" },
        { id: 3, name: "ç›£é€ å–®ä½è»Ÿç¡¬é«”å…ˆè¡Œå»ºç½®", start: "2026-02-06", dur: 20, role: "super", type: "task" },
        { id: 4, name: "CDE å¹³å°æ¶è¨­èˆ‡æ¸¬è©¦", start: "2026-03-01", dur: 30, role: "pcm", type: "task" },
        { id: 5, name: "å» å•†æ±ºæ¨™ / é–‹å·¥", start: "2026-04-20", dur: 1, role: "milestone", type: "milestone" },
        { id: 6, name: "å» å•†æ¡è³¼è»Ÿé«”èˆ‡æ†‘è­‰è¾¦ç†", start: "2026-04-21", dur: 14, role: "const", type: "task" },
        { id: 7, name: "ç³»çµ±æ•´åˆæ¸¬è©¦ (SIT)", start: "2026-05-05", dur: 7, role: "const", type: "task" },
        { id: 7.5, name: "ä½¿ç”¨è€…é©—æ”¶ (UAT) èˆ‡è¡Œæ”¿ç°½æ ¸", start: "2026-05-12", dur: 6, role: "pcm", type: "task" },
        { id: 8, name: "æ­£å¼ä¸Šç·š (Go-Live)", start: "2026-05-18", dur: 5, role: "pcm", type: "task" }
    ];

    function getTimelinePercent(dateStr) {
        const start = new Date("2026-01-01").getTime();
        const end = new Date("2026-06-30").getTime();
        const current = new Date(dateStr).getTime();
        return ((current - start) / (end - start)) * 100;
    }

    // --- HTML Templates ---

    const dashboardHTML = `
        <h3>ğŸ“… é—œéµé‡Œç¨‹ç¢‘æ™‚é–“è»¸ (Timeline)</h3>
        <div class="timeline-container">
            <div class="timeline-line">
                <div class="timeline-point" style="left: ${getTimelinePercent('2026-01-23')}%;" title="å°ˆæ¡ˆå•Ÿå‹•">
                    <div class="point-date">1/23</div><div class="point-label">å•Ÿå‹•èˆ‡è¦ç¯„</div>
                </div>
                <div class="timeline-point" style="left: ${getTimelinePercent('2026-03-01')}%;" title="ç›£é€ å»ºç½®å®Œæˆ">
                    <div class="point-date">3/01</div><div class="point-label">ç›£é€ æ•´å‚™å®Œæˆ</div>
                </div>
                <div class="timeline-point" style="left: ${getTimelinePercent('2026-04-20')}%; background: #e74c3c;" title="å» å•†æ±ºæ¨™">
                    <div class="point-date">4/20</div><div class="point-label">æ±ºæ¨™èˆ‡é–‹å·¥</div>
                </div>
                <div class="timeline-point" style="left: ${getTimelinePercent('2026-05-18')}%; background: #27ae60;" title="æ­£å¼ä¸Šç·š">
                    <div class="point-date">5/18</div><div class="point-label">æ­£å¼ä¸Šç·š</div>
                </div>
            </div>
        </div>
        <h3 style="margin-top:40px;">ğŸ“† å‹•æ…‹æ’ç¨‹ç”˜ç‰¹åœ– (Gantt Chart)</h3>
        <div class="gantt-container">
            <table class="gantt-table">
                <thead class="gantt-header">
                    <tr><th>å·¥ä½œé …ç›®</th><th>1æœˆ</th><th>2æœˆ</th><th>3æœˆ</th><th>4æœˆ</th><th>5æœˆ</th><th>6æœˆ</th></tr>
                </thead>
                <tbody id="gantt-body"></tbody>
            </table>
        </div>
        <div style="margin-top:10px; font-size:0.9rem;">
            <span style="display:inline-block; width:15px; height:15px; background:#8e44ad; margin-right:5px;"></span>PCM
            <span style="display:inline-block; width:15px; height:15px; background:#27ae60; margin-right:5px; margin-left:15px;"></span>ç›£é€ 
            <span style="display:inline-block; width:15px; height:15px; background:#d35400; margin-right:5px; margin-left:15px;"></span>æ–½å·¥
        </div>
    `;

    const networkHTML = `<div id="network-viz"></div>`;

    const raciHTML = `
        <h3>âš–ï¸ é›»å­ç°½ç« æ¬Šè²¬åŠƒåˆ†çŸ©é™£ (RACI Matrix)</h3>
        <table class="raci-table">
            <thead>
                <tr><th class="col-task">å·¥ä½œé …ç›®</th><th>æ©Ÿé—œ</th><th>PCM</th><th>ç›£é€ </th><th>æ–½å·¥</th><th>å‚™è¨»</th></tr>
            </thead>
            <tbody>
                <tr><td class="col-task">1. åˆ¶åº¦å»ºç«‹èˆ‡æ¨™æº–åˆ¶å®š</td><td class="symbol-A">A</td><td class="symbol-R">R</td><td class="symbol-I">I</td><td class="symbol-I">I</td><td>PCM æ’°å¯« BEP</td></tr>
                <tr><td class="col-task">2. æ†‘è­‰èˆ‡è»Ÿé«”è³¼ç½®</td><td>-</td><td>-</td><td class="symbol-R">R</td><td class="symbol-R">R</td><td>å„å–®ä½è‡ªè¡Œè³¼è²·</td></tr>
                <tr><td class="col-task">3. æ–½å·¥åœ–/è¨ˆç•«æ›¸ç°½è­‰</td><td class="symbol-I">I</td><td class="symbol-I">I</td><td class="symbol-C">C</td><td class="symbol-A">A / R</td><td>æŠ€å¸«å¿…é ˆè¦ªè‡ªæ’å¡</td></tr>
                <tr><td class="col-task">4. ç›£å·¥æ—¥å ±è¡¨ç°½è­‰</td><td class="symbol-I">I</td><td class="symbol-I">I</td><td class="symbol-R">R</td><td class="symbol-R">R</td><td>å„ªå…ˆæ¨å‹•é …ç›®</td></tr>
            </tbody>
        </table>
    `;

    const specsHTML = `
        <div style="display:flex; gap:20px; flex-wrap:wrap;">
            <div class="spec-section" style="flex:1; min-width:300px;">
                <div class="spec-title">ğŸ› ï¸ ç¡¬é«”èˆ‡æ†‘è­‰è¦æ ¼ (Hardware Specs)</div>
                <ul class="spec-list">
                    <li><span class="spec-key">æ†‘è­‰é¡å‹ (Certificate)</span> <span class="spec-val">HCA 2.0 (å·¥å•†æ†‘è­‰) æˆ– MOICA (è‡ªç„¶äººæ†‘è­‰)</span></li>
                    <li><span class="spec-key">è®€å¡æ©Ÿ (Reader)</span> <span class="spec-val">ç¬¦åˆ PC/SC æ¨™æº–ä¹‹æ™¶ç‰‡è®€å¡æ©Ÿ</span></li>
                    <li><span class="spec-key">åŠ å¯†æ¼”ç®—æ³• (Algo)</span> <span class="spec-val">RSA 2048 bits æˆ–ä»¥ä¸Š</span></li>
                    <li><span class="spec-key">é›œæ¹Šæ¼”ç®—æ³• (Hash)</span> <span class="spec-val">SHA-256 (åš´ç¦ä½¿ç”¨ SHA-1)</span></li>
                </ul>
            </div>
            <div class="spec-section" style="flex:1; min-width:300px;">
                <div class="spec-title">ğŸ’» è»Ÿé«”èˆ‡æ ¼å¼è¦æ±‚ (Software Specs)</div>
                <ul class="spec-list">
                    <li><span class="spec-key">æª”æ¡ˆæ ¼å¼ (Format)</span> <span class="spec-val">PDF 1.7 (ISO 32000-1)</span></li>
                    <li><span class="spec-key">ç°½ç« æ¨™æº– (Standard)</span> <span class="spec-val">PAdES (PDF Advanced Electronic Signatures)</span></li>
                    <li><span class="spec-key">æ™‚æˆ³æœå‹™ (Timestamp)</span> <span class="spec-val">éœ€ä»‹æ¥ä¸­è¯é›»ä¿¡æˆ–é—œè²¿ç¶²è·¯ TSA</span></li>
                    <li><span class="spec-key">é•·æœŸé©—è­‰ (LTV)</span> <span class="spec-val">å¿…é ˆåµŒå…¥æ’¤éŠ·æ¸…å–® (CRL/OCSP)</span></li>
                </ul>
            </div>
        </div>

        <div class="spec-section">
            <div class="spec-title">ğŸ“ æ‹›æ¨™æ–‡ä»¶æ¢æ¬¾ç¯„æœ¬ (Tender Clause Template)</div>
            <p>è«‹å°‡ä»¥ä¸‹æ¢æ¬¾ç´å…¥ã€Œæ–½å·¥è¦ç¯„ - ä¸€èˆ¬æ¢æ¬¾ã€ç« ç¯€ï¼š</p>
            <div class="code-block">
ç¬¬ 01300 ç«  - æ–‡æ›¸é€å¯©èˆ‡é›»å­åŒ–ä½œæ¥­
1. æ‰¿åŒ…å•†æ‡‰æ–¼é–‹å·¥å¾Œ 14 æ—¥å…§ï¼Œå‚™å¦¥ç¬¦åˆé›»å­ç°½ç« æ³•è¦å®šä¹‹ç¡¬é«”èˆ‡æ†‘è­‰ã€‚
2. æ‰€æœ‰æé€ä¹‹è¨ˆç•«æ›¸ã€æ–½å·¥åœ–ã€æ—¥å ±è¡¨ï¼Œå‡é ˆæ¡ç”¨ PDF é›»å­ç°½ç« æ ¼å¼æé€ã€‚
3. é›»å­ç°½ç« å¿…é ˆåŒ…å«æœ‰æ•ˆä¹‹æ™‚æˆ³ (Timestamp)ï¼Œä¸¦ç¢ºä¿ç°½ç« ç•¶ä¸‹æ†‘è­‰æœªè¢«æ’¤éŠ·ã€‚
4. å°ˆä»»å·¥ç¨‹äººå“¡ (æŠ€å¸«) ä¹‹ç°½ç« ï¼Œå¿…é ˆç”±æœ¬äººè¦ªè‡ªæŒå¡æ“ä½œï¼Œåš´ç¦å€Ÿå¡ä»£ç°½ã€‚
            </div>
        </div>

        <div class="spec-section">
            <div class="spec-title">ğŸ”„ æŠ€å¸«ç°½ç« æ¨™æº–ä½œæ¥­ç¨‹åº (SOP)</div>
            <ol style="line-height:1.8;">
                <li><b>Step 1:</b> å°‡æ–½å·¥åœ–è½‰æª”ç‚º PDFï¼Œç¢ºèªå…§å®¹ç„¡èª¤ã€‚</li>
                <li><b>Step 2:</b> æ’å…¥æ™¶ç‰‡å¡ (HCA/MOICA) è‡³è®€å¡æ©Ÿã€‚</li>
                <li><b>Step 3:</b> é–‹å•Ÿç°½ç« è»Ÿé«”ï¼Œé¸æ“‡ã€Œå¯è¦‹ç°½ç«  (Visible Signature)ã€ã€‚</li>
                <li><b>Step 4:</b> æ‹–æ›³ç°½åå¤–è§€è‡³åœ–æ¡†ç°½æ ¸æ¬„ä½ã€‚</li>
                <li><b>Step 5:</b> è¼¸å…¥ PIN ç¢¼é€²è¡Œç§é‘°é‹ç®— (Private Key Operation)ã€‚</li>
                <li><b>Step 6:</b> ç³»çµ±è‡ªå‹•é€£ç·š TSA å–å¾—æ™‚æˆ³ä¸¦åµŒå…¥æª”æ¡ˆã€‚</li>
                <li><b>Step 7:</b> ä¸Šå‚³è‡³ CDE å¹³å°ã€‚</li>
            </ol>
        </div>
    `;

    // --- Main Logic ---

    function switchTab(tabName) {
        const contentDiv = document.getElementById('content');
        const controls = document.getElementById('flowControls');
        
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        event.target.classList.add('active');

        controls.classList.add('hidden');

        if (tabName === 'dashboard') {
            contentDiv.innerHTML = dashboardHTML;
            renderGantt();
        } else if (tabName === 'network') {
            contentDiv.innerHTML = networkHTML;
            setTimeout(renderNetwork, 100);
        } else if (tabName === 'raci') {
            contentDiv.innerHTML = raciHTML;
        } else if (tabName === 'specs') {
            contentDiv.innerHTML = specsHTML;
        } else if (tabName === 'flow') {
            contentDiv.innerHTML = '<div id="flow-viz" style="padding:20px; font-size:1.2rem; line-height:1.6;">è«‹é»æ“Šä¸‹ä¸€æ­¥é–‹å§‹æµç¨‹æ¨¡æ“¬...</div>';
            controls.classList.remove('hidden');
            currentFlowStep = -1;
        }
    }

    function renderGantt() {
        const tbody = document.getElementById('gantt-body');
        const startDate = new Date("2026-01-01").getTime();
        const endDate = new Date("2026-06-30").getTime();
        const totalTime = endDate - startDate;

        tasks.forEach(task => {
            const taskStart = new Date(task.start).getTime();
            const left = ((taskStart - startDate) / totalTime) * 100;
            const width = (task.dur * 86400000 / totalTime) * 100;
            const tr = document.createElement('tr');
            tr.className = 'gantt-row';
            
            let barHTML = task.type === 'milestone' 
                ? `<div class="bar milestone" style="left:${left}%;" title="${task.name}"></div>`
                : `<div class="bar bar-${task.role}" style="left:${left}%; width:0%;" data-final-width="${width}%" title="${task.name}">${task.name}</div>`;

            let gridLines = '';
            for(let i=1; i<6; i++) gridLines += `<div class="grid-line" style="left: ${i * 16.66}%"></div>`;

            tr.innerHTML = `<td class="task-name">${task.name}</td><td colspan="6" class="bar-container-cell">${gridLines}${barHTML}</td>`;
            tbody.appendChild(tr);
        });

        setTimeout(() => {
            document.querySelectorAll('.bar').forEach(bar => { if(bar.dataset.finalWidth) bar.style.width = bar.dataset.finalWidth; });
        }, 100);
    }

    function renderNetwork() {
        var nodes = new vis.DataSet([
            {id: 1, label: '1.å°ˆæ¡ˆå•Ÿå‹•\n(1/23)', group: 'pcm'},
            {id: 2, label: '2.ç´å…¥æ‹›æ¨™\næ–‡ä»¶', group: 'pcm'},
            {id: 3, label: '3.ç›£é€ å»ºç½®\nè»Ÿç¡¬é«”', group: 'super'},
            {id: 4, label: '4.CDEå¹³å°\næ¶è¨­', group: 'pcm'},
            {id: 5, label: '5.å» å•†æ±ºæ¨™\n(4/20)', shape: 'diamond', color: '#e74c3c'},
            {id: 6, label: '6.å» å•†æ¡è³¼\nèˆ‡è¾¦å¡', group: 'const'},
            {id: 7, label: '7.æ•´åˆæ¸¬è©¦\n(SIT)', group: 'const'},
            {id: 7.5, label: '7.5.UATé©—æ”¶\n(5/12)', group: 'pcm'},
            {id: 8, label: '8.æ­£å¼ä¸Šç·š\n(5/18)', shape: 'star', color: '#f1c40f'}
        ]);
        var edges = new vis.DataSet([
            {from: 1, to: 2, arrows:'to'}, {from: 1, to: 3, arrows:'to'}, {from: 1, to: 4, arrows:'to'},
            {from: 2, to: 5, arrows:'to', label: 'ç­‰å¾…æ±ºæ¨™'}, {from: 5, to: 6, arrows:'to'},
            {from: 3, to: 7, arrows:'to', label: 'ç›£é€ å°±ç·’'}, {from: 4, to: 7, arrows:'to', label: 'å¹³å°å°±ç·’'},
            {from: 6, to: 7, arrows:'to'}, {from: 7, to: 7.5, arrows:'to'}, {from: 7.5, to: 8, arrows:'to'}
        ]);
        var container = document.getElementById('network-viz');
        var options = {
            layout: { hierarchical: { direction: "LR", sortMethod: "directed" } },
            groups: {
                pcm: {color:{background:'#8e44ad', border:'purple'}, font:{color:'white'}},
                super: {color:{background:'#27ae60', border:'green'}, font:{color:'white'}},
                const: {color:{background:'#d35400', border:'orange'}, font:{color:'white'}}
            },
            physics: false
        };
        new vis.Network(container, {nodes, edges}, options);
    }

    const flowSteps = [
        "1. PCM å•Ÿå‹•å°ˆæ¡ˆï¼Œç™¼æ–‡é€šçŸ¥å„å–®ä½ (1/23)",
        "2. ä¿®æ”¹æ‹›æ¨™æ–‡ä»¶ï¼ŒåŠ å…¥é›»å­ç°½ç« æ¢æ¬¾ (1/30)",
        "3. ç›£é€ å–®ä½åˆ©ç”¨ç©ºæª”ï¼Œå®Œæˆè®€å¡æ©Ÿèˆ‡è»Ÿé«”å»ºç½® (2æœˆ)",
        "4. CDE å¹³å°æ¡è³¼èˆ‡æ¸¬è©¦å®Œæˆ (3æœˆ)",
        "5. ç­‰å¾…å» å•†æ±ºæ¨™... (4/20)",
        "6. å» å•†é€²å ´ï¼å®£é”é›»å­åŒ–è¦å®šï¼Œå» å•†é–‹å§‹å‹•å“¡æ¡è³¼ (4/21)",
        "7. å» å•†æé€æ¸¬è©¦æª”æ¡ˆ -> ç›£é€ é©—è­‰é€šé (5/10)",
        "7.5. PCM é€²è¡Œ UAT é©—æ”¶èˆ‡è¡Œæ”¿ç°½æ ¸ (5/12-5/17)",
        "8. æ­£å¼ä¸Šç·šï¼æ—¥å ±è¡¨å…¨é¢ç„¡ç´™åŒ– (5/18)"
    ];
    let currentFlowStep = -1;

    function nextFlowStep() {
        if (currentFlowStep < flowSteps.length - 1) {
            currentFlowStep++;
            const div = document.createElement('div');
            div.style.marginBottom = "15px";
            div.style.padding = "10px";
            div.style.borderLeft = "4px solid #3498db";
            div.style.background = "#f8f9fa";
            div.style.opacity = 0;
            div.innerText = flowSteps[currentFlowStep];
            document.getElementById('flow-viz').appendChild(div);
            document.getElementById('stepDesc').innerText = "é€²è¡Œä¸­: " + flowSteps[currentFlowStep];
            setTimeout(() => div.style.opacity = 1, 100);
            div.scrollIntoView({ behavior: "smooth" });
        } else {
            document.getElementById('stepDesc').innerText = "æµç¨‹æ¼”ç¤ºå®Œæˆã€‚";
        }
    }

    switchTab('dashboard');
</script>

</body>
</html>
